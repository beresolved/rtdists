{
    "contents" : "require(lattice)  # for plot of data\nrequire(lme4)\nrequire(plyr)  # for unweighted means \ndat <- read.table(\"http://pastebin.com/raw.php?i=KiQ1kkew\")\n\n#plot data\ndat_print <- within(dat, levels(group) <- paste0(levels(group), \", n= \", table(group))) \nxyplot(dv ~ iv|group, dat_print, panel = function(x, y) {\n           panel.xyplot(x, y)\n           panel.abline(lm(y ~ x))\n         })  # number is group size\n\n# weighted means\ncor(dat$dv, dat$iv)\nmean(dat$dv)\n\n# unweighted means:\nmean(daply(dat, .(group), function(x) cor(x$dv, x$iv))) \nmean(daply(dat, .(group), function(x) mean(x$dv)))\n\n\n# full model:\nsummary(lmer(dv~I(scale(iv, scale=FALSE))+(iv|group), dat))\n\n# model with small groups removed:\ngroups_exclude <- c(\"b\", \"c\", \"d\", \"s\") ndat <- dat[!(dat$group %in% groups_exclude),]\nsummary(lmer(dv~I(scale(iv, scale=FALSE))+(iv|group), ndat))\n\n\n# binary analysis:\ndat <- within(dat, {wins <- dv < 0})\n\nsummary()\n\n\ndat <- within(dat, {\n   size <- table(group)[paste(group)]\n   ivC <- iv - mean(iv)\n   sizeC <- size - mean(size)  # \"mean(sizes)\" is the grand mean of group sizes\n})\nsummary(lmer(dv ~ ivC*sizeC + (ivC|group), data=dat))\n\n\n\nglmm1 <- glmer(wins ~ ivC*sizeC + (ivC|group), dat, family = binomial)\nsummary(glmm1)\n\nglmm2 <- glmer(wins ~ iv + (iv|group), dat, family = binomial)\n\nsummary(glmm2)\n\nxyplot(wins ~ iv|group, dat, panel = function(x, y) {\n           panel.xyplot(x, y)\n           panel.abline(lm(y ~ x))\n         })  # number is group size\n\nrequire(effects)\n\nplot(Effect(\"iv\", glmm2, xlevels = list(iv = seq(0.5, 1, 0.1))), rescale.axis = FALSE, ylim = c(0,1))\n\nplot(allEffects(glmm1, xlevels = list(iv = seq(0.5, 1, 0.1))), rescale.axis = FALSE, ylim = c(0,1))\n\nstr(dat)\n\nEffect(\"ivC\", glmm1)\n\nattributes\n",
    "created" : 1407915923595.000,
    "dirty" : true,
    "encoding" : "",
    "folds" : "",
    "hash" : "3015561619",
    "id" : "8CD57691",
    "lastKnownWriteTime" : 13229804949012596,
    "path" : null,
    "project_path" : null,
    "properties" : {
        "tempName" : "Untitled1"
    },
    "source_on_save" : false,
    "type" : "r_source"
}